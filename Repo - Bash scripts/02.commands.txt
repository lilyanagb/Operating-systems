cd /srv/fmi-os/exercises/02.commands
astero.openfmi.net

02-a-0100 : Направете копие на файла /etc/passwd във вашата home директория под името my_passwd.

Ans: cp /etc/passwd ~/my_passwd

02-a-0500 : Направете директория practice-test в home директорията ви. Вътре направете директория test1. Можете ли да направите тези две неща наведнъж? Разгледайте нужната man страница. След това създайте празен файл вътре, който да се казва test.txt, преместете го в practice-test чрез релативни пътища.

Ans:  mkdir -p ~/practise-test/test1
	cd ~/practise-test/test1
	touch file.txt
	mv test.txt ~/practise-test/

! mkdir -p - parent directory-то, ако не съществува, се създава.

02-a-0600 : Създайте директорията practice/01 във вашата home директория.
Създайте 3 файла в нея - f1, f2, f3.
Копирайте файловете f1, f2, f3 от директорията practice/01/ в директория dir1, намираща се във вашата home директория. Ако нямате такава, създайте я.

Ans:  mkdir -p ~/practice/01
	cd ~/practice/01/
	touch f{1,2,3}
	mkdir ~/dir1
	cp f{1,2,3} ~/dir1

02-a-0601 : Нека файлът f2 бъде преместен в директория dir2, намираща се във вашата home директория и бъде преименуван на numbers.

Ans:  mkdir ~/dir2
	mv ~/dir1/f2 ~/dir2/numbers
	
02-a-1200 : Отпечатайте имената на всички директории в директорията /home.

Ans: find /home -type d 2> /dev/null

02-a-4000 : Създайте файл permissions.txt в home директорията си. За него дайте единствено - read права на потребителя създал файла, write and exec на групата, read and exec на всички останали. Направете го и с битове, и чрез "буквички".

Ans:  touch ~/permissions.txt
	chmod u=r,g=wx,o=rx ~/permissions.txt
	chmod 435 ~/permissions.txt

! rwx = 2^2 2^1 2^0

02-a-4100 : За да намерите какво сте правили днес: намерете всички файлове в home директорията ви, които са променени в последния 1 час.

Ans: find ~ -cmin -60

! По приоритет: https://www.computerhope.com/unix/ufind.htm
! depth, maxdepth, mindepth
! amin (access), cmin (change), mmin (modify), empty, gid/uid, name, newer <file> (modified more recently than the file), perm, size [-+]n[c(bytes)], type, fprint

02-a-5000 : Копирайте /etc/services в home директорията си. Прочетете го с командата cat. (Ако този файл го няма, прочетете с cat произволен текстов файл напр. /etc/passwd)

Ans:  cp /etc/services ~/
	cat services
	
02-a-5200 : Създайте symlink на файла /etc/passwd в home директорията ви (да се казва например passwd_symlink).

Ans: ln -s /etc/passwd ~/passwd_symlink

02-a-5400 : Изведете всички обикновени ("regular") файлове, които /etc и нейните преки поддиректории съдържат

Ans: find /etc -maxdepth 1 -type f

02-a-5401 : Изведете само първите 5 реда от /etc/services

Ans: cat /etc/services | head -n 5

02-a-5402 : Изведете всички обикновени ("regular") файлове, които само преките поддиректории на /etc съдържат

Ans: find /etc -maxdepth 1 -type f

02-a-5403 : Изведете всички преки поддиректории на /etc

Ans: find /etc -maxdepth 1 -type d

02-a-5500 : Създайте файл, който да съдържа само последните 10 реда от изхода на 02-a-5403

Ans: find /etc -maxdepth 1 -type f | tail -n 10 >> ~/text.txt

02-a-5501 : Изведете обикновените файлове по-големи от 42 байта в home директорията ви

Ans: find ~ -type f -size +42c

02-a-5504 : Изведете всички обикновени файлове в директорията /tmp които са от вашата група, които имат write права за достъп за група или за останалите(o=w)

Ans: find /tmp -type f -perm -g=w -perm -o=w

02-a-5505 : Изведете всички файлове, които са по-нови от practice/01/f1 ( би трябвало да е създаден като част от по-ранна задача ).

Ans: find ~ -type f -newer practice/01/f1

02-a-5506 : Изтрийте файловете в home директорията си по-нови от practice/01/f3 (подайте на rm опция -i за да може да изберете само тези които искате да изтриете).

Ans: find ~ -type f -newer practice/01/f3 -exec rm -i {} \;

! rm [-f | --force] {[-i | --interactive[=always]] | [-I | --interactive=once] | [-r | -R | --recursive]}

02-a-6000 : Намерете файловете в /bin, които могат да се четат, пишат и изпълняват от всички.

Ans: find /bin -perm 777

02-a-8000 : Копирайте всички файлове от /etc, които могат да се четат от всички, в директория myetc в home директорията ви. Направете такава, ако нямате.

Ans:  mkdir myetc
	find /etc/ -perm -u=r,g=r,o=r -exec cp {} ~/myetc \;

! find / -perm -002 -not -perm -1000
! find / -perm /022 -and -perm -4000 -exec ls -ldb {} ;
               ^^^^             ^
               ||||             |-- So the SUID is 4
               ||||-- Other is writable (2)  
               |||--Group permission is writable (2)
               ||-- No owner permission mentioned (0)
               |-- As the logic is OR - group or other or both

02-a-9000 : Oт предната задача: когато вече сте получили myetc с файлове, архивирайте всички от тях, които започват с 'c' в архив, който се казва c_start.tar изтрийте директорията myetc и цялото и съдържание изтрийте архива c_start.tar

Ans:  tar -cf c_start.tar ~/myetc/c*
	rm -rf c_start.tar
	rm -rf ~/myetc

! c - create, x - extract, r - append, z - gzip, f - file

02-a-9500 : Използвайки едно извикване на командата find, отпечатайте броя на редовете във всеки обикновен файл в /etc директорията.

Ans: find /etc/ -type f -exec wc -l {} \;

! c - count of bytes, m - count of characters, l - line count, w - number of words

02-b-4000 : Копирайте най-малкия файл от тези, намиращи се в /etc, в home директорията си.

Ans:  find /etc/ -printf "%s %p\n" 2>/dev/null | sort -n | head -n 1| cut -d ' ' -f2 | xargs -I {} cp {} ~

! The -I option changes the way the new command lines are built. Instead of adding as many arguments as possible at a time, xargs will take one name at a time from its input, look for the given token ({} here) and replace that with the name. (с -I очакваме команда след xargs)